<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stand Out - AI Design Studio</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

    <header class="navbar fade-in">
        <div class="logo-container">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Stand Out Logo" class="app-logo">
            <h1>Stand Out</h1>
        </div>
        
        <div class="nav-actions">
            <a href="#" class="nav-link" onclick="location.reload()">Home</a>
            
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider round">
                        <span class="icon-sun">‚òÄÔ∏è</span>
                        <span class="icon-moon">üåô</span>
                    </div>
                </label>
            </div>
        </div>
    </header>

    <main class="content-area fade-in-up">
        
        <div class="text-center">
            <h2>Trim the rest. <span class="highlight">Keep the best.</span></h2>
            <p>Instant background removal. Professional editing.</p>
        </div>

        <!-- 1. UPLOAD BOX -->
        <div class="upload-box" id="upload-view">
            <img src="{{ url_for('static', filename='images/athlete.jpg') }}" alt="Demo" class="bg-preview">
            
            <div class="upload-overlay" id="upload-content">
                <div class="glass-card float-animation">
                    <div class="icon-container">‚òÅÔ∏è</div>
                    <p class="upload-title">Drag & Drop Image Here</p>
                    
                    <input type="file" id="fileInput" hidden accept="image/*">
                    <button class="upload-button glow-effect" onclick="document.getElementById('fileInput').click()">
                        Upload Image
                    </button>
                    
                    <p class="file-info">JPG, PNG, WEBP ‚Ä¢ Max 25MB</p>
                </div>
            </div>

            <div class="upload-overlay" id="loading-overlay" style="display: none;">
                <div class="loading-container">
                    <div class="spinner"></div>
                    <p class="processing-text">Processing Image...</p>
                </div>
            </div>
        </div>

        <!-- 2. RESULT BOX -->
        <div class="result-box" id="result-view" style="display: none;">
            
            <div class="comparison-wrapper">
                <div class="comparison-container" id="comparison-container">
                    <img id="comp-original" src="" alt="Original">
                    
                    <div class="modified-image-container" id="modified-layer">
                        <div class="checks-bg"></div> 
                        <img id="comp-result" src="" alt="Result">
                    </div>

                    <div class="slider-handle" id="slider-handle">
                        <div class="handle-line"></div>
                        <div class="handle-circle">‚Üî</div>
                    </div>
                </div>
            </div>
            
            <!-- Controls -->
            <div class="tools-container">
                <div class="tool-group-left">
                    <button class="tool-btn secondary" onclick="location.reload()">üóëÔ∏è New</button>
                </div>

                <div class="tool-group-center">
                    <button class="tool-btn edit-action" id="edit-btn">üé® Refine / Erase</button>
                    <button class="tool-btn bg-action" id="bg-btn">üåÑ Change Background</button>
                    <button class="tool-btn view-action" id="view-btn">üëÅÔ∏è View</button>
                </div>

                <div class="tool-group-right">
                    <a id="download-btn" class="tool-btn primary glow-effect" href="#" download>Download HD ‚¨áÔ∏è</a>
                </div>
            </div>
        </div>

        <!-- 3. CREATOR INFO -->
        <div class="creator-section">
            <div class="creator-card hover-lift">
                <img src="{{ url_for('static', filename='images/creator.jpg') }}" alt="Ayush Kumar" class="creator-photo">
                <div class="creator-text">
                    <h3>Created by Ayush Kumar</h3> 
                    <p>Building premium AI tools.<br>
                    <a href="https://instagram.com/napoleon_bonaparte_404" target="_blank" class="social-link">@napoleon_bonaparte_404</a></p>
                </div>
            </div>
        </div>

    </main>

    <!-- === MODAL 1: VIEW/ZOOM === -->
    <div id="view-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detailed View</h3>
                <button class="close-btn" onclick="closeModal('view-modal')">‚úñ</button>
            </div>
            <div class="canvas-wrapper">
                <canvas id="zoom-canvas"></canvas>
            </div>
            <p class="modal-instruction">Scroll to Zoom ‚Ä¢ Drag to Pan</p>
        </div>
    </div>

    <!-- === MODAL 2: REFINE/ERASE === -->
    <div id="edit-modal" class="modal-overlay" style="display: none;">
        <div class="editor-container">
            <div class="editor-toolbar">
                <h3>Refine Edges</h3>
                
                <div class="tool-group">
                    <button class="brush-btn active" id="tool-eraser">üßπ Eraser</button>
                    <div class="slider-group">
                        <label>Size</label>
                        <input type="range" id="eraser-size" min="5" max="100" value="30">
                    </div>
                </div>

                <div class="tool-group">
                    <button class="brush-btn" id="tool-restore">üñåÔ∏è Restore</button>
                    <div class="slider-group">
                        <label>Size</label>
                        <input type="range" id="restore-size" min="5" max="100" value="30">
                    </div>
                </div>

                <div class="divider-h"></div>

                <div class="history-controls">
                    <button class="history-btn" id="btn-undo">‚Ü©Ô∏è Undo</button>
                    <button class="history-btn" id="btn-redo">Redo ‚Ü™Ô∏è</button>
                </div>
            </div>

            <div class="editor-stage">
                <div class="canvas-stack">
                    <img id="edit-bg-ref" src="">
                    <div class="edit-checks"></div>
                    <canvas id="edit-canvas"></canvas>
                    <div id="cursor-brush"></div>
                </div>
            </div>

            <div class="editor-actions">
                <button class="action-btn discard" onclick="closeModal('edit-modal')">‚úñ Discard</button>
                <button class="action-btn save glow-effect" id="btn-save-refine">‚úî Save Changes</button>
            </div>
        </div>
    </div>

    <!-- === MODAL 3: BACKGROUND STUDIO === -->
    <div id="bg-modal" class="modal-overlay" style="display: none;">
        <div class="editor-container">
            
            <div class="editor-toolbar scrollable">
                <h3>Background Studio</h3>
                
                <div class="tab-container">
                    <button class="tab-btn active" onclick="switchBgTab('color')">Color</button>
                    <button class="tab-btn" onclick="switchBgTab('upload')">Upload</button>
                </div>

                <!-- TABS -->
                <div id="tab-color" class="tab-content active">
                    <div class="color-picker-wrapper">
                        <label>Solid Color</label>
                        <input type="color" id="bg-color-picker" class="color-input" value="#ffffff">
                    </div>
                </div>

                <div id="tab-upload" class="tab-content" style="display: none;">
                    <label class="file-label">Upload Custom Background</label>
                    <label for="bg-file-input" class="custom-file-upload">
                        üìÇ Choose Image
                    </label>
                    <input type="file" id="bg-file-input" accept="image/*">
                    <button class="history-btn" id="btn-remove-bg-upload" style="margin-top: 10px; width:100%">‚ùå Remove Background</button>
                </div>

                <div class="divider-h"></div>

                <h3>Adjustments</h3>
                
                <!-- 1. BACKGROUND BLUR -->
                <div class="slider-group">
                    <label>Background Blur</label>
                    <input type="range" id="adj-bg-blur" min="0" max="20" value="0">
                </div>

                <!-- 2. SOFTNESS -->
                <div class="slider-group">
                    <label>Edge Softness (Subject Only)</label>
                    <input type="range" id="adj-softness" min="0" max="20" value="0">
                </div>

                <!-- 3. SCALE -->
                <div class="slider-group">
                    <label>Subject Scale</label>
                    <input type="range" id="adj-scale" min="0.1" max="2" step="0.1" value="1">
                </div>

                <!-- 4. BRIGHTNESS -->
                <div class="slider-section">
                    <label class="main-label">Brightness</label>
                    <div class="sub-slider">
                        <span>Global</span>
                        <input type="range" id="br-global" min="0" max="200" value="100">
                    </div>
                    <div class="sub-slider">
                        <span>Subject</span>
                        <input type="range" id="br-subject" min="0" max="200" value="100">
                    </div>
                    <div class="sub-slider">
                        <span>Background</span>
                        <input type="range" id="br-bg" min="0" max="200" value="100">
                    </div>
                </div>

                <!-- 5. CONTRAST -->
                <div class="slider-section">
                    <label class="main-label">Contrast</label>
                    <div class="sub-slider">
                        <span>Global</span>
                        <input type="range" id="ct-global" min="0" max="200" value="100">
                    </div>
                    <div class="sub-slider">
                        <span>Subject</span>
                        <input type="range" id="ct-subject" min="0" max="200" value="100">
                    </div>
                    <div class="sub-slider">
                        <span>Background</span>
                        <input type="range" id="ct-bg" min="0" max="200" value="100">
                    </div>
                </div>

                <!-- 6. SATURATION -->
                <div class="slider-section">
                    <label class="main-label">Saturation</label>
                    <div class="sub-slider">
                        <span>Global</span>
                        <input type="range" id="st-global" min="0" max="200" value="100">
                    </div>
                    <div class="sub-slider">
                        <span>Subject</span>
                        <input type="range" id="st-subject" min="0" max="200" value="100">
                    </div>
                    <div class="sub-slider">
                        <span>Background</span>
                        <input type="range" id="st-bg" min="0" max="200" value="100">
                    </div>
                </div>

                <button class="history-btn" id="btn-reset-adj" style="margin-top: 10px;">‚Ü∫ Reset Defaults</button>
            </div>

            <div class="editor-stage" id="bg-stage">
                <div id="composition-container">
                    <!-- Background Layer -->
                    <div id="comp-bg-layer"></div> 
                    <!-- Subject Layer -->
                    <img id="comp-subject-layer" src="" draggable="false">
                </div>
                <p class="overlay-hint">Drag subject to move ‚Ä¢ Scroll to zoom stage</p>
            </div>

            <div class="editor-actions">
                <button class="action-btn discard" onclick="closeModal('bg-modal')">‚úñ Discard</button>
                <button class="action-btn save glow-effect" id="btn-save-bg">‚úî Save Background</button>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Stand Out. Built by a One-Man Army.</p>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>